<div class="wrapper">
  <mat-card class="address-card">
    <mat-card-header>
      <mat-card-subtitle>SOLAR</mat-card-subtitle>
      <mat-card-title>Set your location</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <p>
        Enter your full address (including house number) and select a prediction
        to set exact location. Confirm on the map that the location matches your
        needs.
      </p>
      <lib-google-maps-autocomplete
        [apiKey]="googleMapsApiKey"
        [countryCode]="selectedCountryCode"
        (addressDetailsSelect)="handleAddressDetailsSelect($event)"
        (addressSelect)="handleAddressSelect($event)"
        (coordinatesSelect)="handleCoordinatesSelect($event)"
      >
      </lib-google-maps-autocomplete>
      <p *ngIf="!addressCompleted" class="warn">
        You have to provide a house number!
      </p>
      <mat-divider></mat-divider>
    </mat-card-content>
    <mat-card-footer>
      <mat-progress-bar
        (mode)="(progressBarMode)"
        [value]="progressBarValue"
      ></mat-progress-bar>
    </mat-card-footer>
  </mat-card>

  <div class="arrow">
    <mat-icon
      aria-hidden="false"
      aria-label="arrow_down icon"
      svgIcon="arrow_down"
    ></mat-icon>
  </div>

  <mat-card *ngIf="addressCompleted" class="address-card no-margin-top">
    <mat-card-header>
      <mat-card-subtitle>SOLAR</mat-card-subtitle>
      <mat-card-title>Check your location on the map</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <p>Check if your address matches your position on the map.</p>
      <div *ngIf="coords">
        Latitude: {{ coords.lat }}, Longitude: {{ coords.lng }}
      </div>
    </mat-card-content>
  </mat-card>
  <div *ngIf="insightReceived" class="arrow">
    <mat-icon
      aria-hidden="false"
      aria-label="arrow_down icon"
      svgIcon="arrow_down"
    ></mat-icon>
  </div>
  <mat-card *ngIf="insightReceived" class="address-card">
    <mat-card-header>
      <mat-card-subtitle>SOLAR</mat-card-subtitle>
      <mat-card-title>Check your location on the map</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <p>Check if your address matches your position on the map.</p>
      <div *ngIf="coords">
        Latitude: {{ coords.lat }}, Longitude: {{ coords.lng }}
      </div>
    </mat-card-content>
    <button (click)="getSolarInsights()">Get solar insights</button>
  </mat-card>
</div>
